<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>canvas练习</title>
</head>
<body>
  <!-- 不用通过css设置宽高 -->
  <canvas id="demo" width="600" height="600">
    ie9上才支持canvas
  </canvas>
  <script>
    var canvas = document.getElementById('demo')
    var ctx = canvas.getContext('2d')
    
    /* 练习一、画一个三角形 */
    // canvas.style.border = '1px solid red'
    // ctx.moveTo(100,100)
    // ctx.lineTo(200,100)
    // ctx.lineTo(100,200)
    // // 设置闭合
    // ctx.closePath()
    // // 设置线颜色
    // ctx.strokeStyle = 'red'
    // // 设置线宽
    // ctx.lineWidth = 4
    // ctx.stroke()
    // // 填充颜色
    // ctx.fillStyle = 'red'
    // ctx.fill()

    /* 练习二、画一个网格 */
    // canvas.width = 600
    // canvas.height = 600
    // canvas.style.border = '1px solid #000'

    // var rectH = 10
    // var rectW = 10
    // ctx.lineWidth = .5

    // // 绘制表格
    // // 绘制横线
    // for(let i=0; i<canvas.width / rectH; i++) {
    //   ctx.moveTo(0 , i*rectH)
    //   ctx.lineTo(canvas.width, i*rectH)

    //   // 绘制竖线
    //   ctx.moveTo(i* rectW, 0)
    //   ctx.lineTo(i* rectW, canvas.height)
    // }

    // ctx.stroke()

    // /* 练习三、画三个横线 */
    // canvas.width = 600
    // canvas.height = 600
    // canvas.style.border = '1px solid #000'
    // ctx.strokeStyle = 'red'
    // ctx.lineWidth = 20
    // // 第一条线
    // ctx.beginPath()  // 开一个新路径，开启新状态
    // ctx.moveTo(100,100)
    // ctx.lineTo(300,100)
    // ctx.stroke()

    // // 第二条线
    // ctx.beginPath() 
    // ctx.strokeStyle = 'green'
    // ctx.moveTo(100,200)
    // ctx.lineTo(300,200)
    // ctx.stroke()
    // // 第三条线
    // ctx.beginPath()  
    // ctx.strokeStyle = 'orange'
    // ctx.moveTo(100,300)
    // ctx.lineTo(300,300)
    // ctx.stroke()

    
    /* 练习四、画一个矩形 */
    // canvas.width = 600
    // canvas.height = 600
    // canvas.style.border = '1px solid #000'
    // ctx.strokeStyle = 'red'
    // // 前两个参数是矩形的x,y坐标， 后面两个参数是矩形的宽高
    // ctx.rect(100,100,50,50)
    // ctx.stroke()

    // // 描边矩形
    // ctx.strokeRect(200,200,100,150)
    // // 填充矩形
    // ctx.fillRect(300,300,40,40)
    // ctx.stroke()


    /* 练习五、画一个扇形和饼图 */
    canvas.width = 600
    canvas.height = 600
    canvas.style.border = '1px solid #000'
    ctx.strokeStyle = 'red'
    // ctx.moveTo(300,300)
    // ctx.fillStyle = 'red'
    // ctx.arc(300,300,100,-90*Math.PI/180, -30*Math.PI/180)
    // ctx.fill()

    var data = [
      {
      value:.2,
      color:'red',
      title:'应届生'
      },
      {
      value:.3,
      color:'blue',
      title:'社会招生'
      },
      {
      value:.4,
      color:'green',
      title:'老学员推荐'
      },
      {
      value:.1,
      color:'#ccc',
      title:'公开课'
      },
    ]

    var tempAngle = -90
    var x0 = 400, y0 = 400
    var radius = 200
    // 从-90度开始绘制
    for(var i = 0; i< data.length; i++){
      ctx.beginPath()
      ctx.moveTo(x0,y0)
      // 当前扇形的角度
      var angle = data[i].value * 360
      ctx.fillStyle = data[i].color
      // 从tempAnglr绘制
      var startAngle = tempAngle * Math.PI / 180
      // 从tempAngle绘制到我们自己的angle的区域
      var endAngle = (tempAngle + angle) * Math.PI / 180
      ctx.arc(x0, y0, radius, startAngle, endAngle)
      ctx.fill()
      tempAngle += angle
    }

  </script>
</body>
</html>